<section class="section">
  <div class="container calendar-detail">
    <h1>{{ isNew ? '➕ New Event' : '✏️ Edit Event' }}</h1>

    <form (ngSubmit)="saveEvent()" *ngIf="!loading">
      <label class="field-label">Date</label>
      <input
        class="input"
        type="date"
        [(ngModel)]="event.event_date"
        name="date"
        required
      />

      <label class="field-label">Type</label>
      <select class="select" [(ngModel)]="event.type" name="type" required>
        <option value="">Select type…</option>
        <option value="service">Service</option>
        <option value="rehearsal">Rehearsal</option>
        <option value="other">Other</option>
      </select>

      <label class="field-label">Setlist</label>
      <select class="select" [(ngModel)]="event.setlist_id" name="setlist">
        <option [ngValue]="null">— None —</option>
        <option *ngFor="let s of setlists" [ngValue]="s.id">{{ s.name }}</option>
      </select>
      <a routerLink="/setlists" class="small-link">➕ Create new setlist</a>

      <label class="field-label">Notes</label>
      <textarea
        class="input"
        rows="3"
        [(ngModel)]="event.notes"
        name="notes"
        placeholder="Optional notes (e.g., special songs, instructions)"
      ></textarea>

      <div class="actions">
        <button type="submit" class="btn btn-primary w-100">
          {{ isNew ? 'Create Event' : 'Save Changes' }}
        </button>
        <button type="button" class="btn btn-ghost w-100" (click)="goBack()">Cancel</button>
      </div>
    </form>

    <div *ngIf="loading" class="muted">Loading…</div>
  </div>
</section>
